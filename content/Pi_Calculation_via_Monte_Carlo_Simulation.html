<html>
<head>
<link rel="stylesheet" type="text/css" href="../site-style/normalize.css">
<link rel="stylesheet" type="text/css" href="../site-style/skeleton.css">
<link rel="stylesheet" type="text/css" href="../site-style/style.css">
</head>
<body>
<div class="container">
<header>
<div class="row">
<a href="#"><div class="twelve columns logo" href="#"></div></a>
</div>
<div class="row menu">
<a href="#"><div class="three columns menu" id="home">Home</div></a>
<a href="#"><div class="three columns menu" id="archive">Archive</div></a>
<a href="#"><div class="three columns menu" id="about">About</div></a>
<div class="three columns menu"><form id="search-form"><input id="search" type="text" name="search" placeholder="Search"><input type="submit" id="submit" value=""></input></form></div>
</div>
</header>
<div class="row main">
<div class="twelve columns">
<!--Begin Content-->
<h1>Pi Calculation via Monte Carlo Simulation</h1>
<h4>October 10, 2014</h4>
<img src="http://codyalantaylor.com/wp-content/uploads/2014/10/Arduino_Logo-800x336.jpg"></img>
<p>The Monte Carlo Method is used in simulations which are statistically deterministic. It is not the most efficient or accurate method used to calculate pi; however, it is the most comprehensible and is also a good demonstration of the power of the Monte Carlo Method.  Before calculating pi let us discuss what it is. Pi is the ratio between a circle’s circumference and its diameter.  This ratio is the same for all circles.  It is called pi.</p>
<p>To begin the simulation, let’s begin with the well known relationship,</p>
<p>$$area = \pi r^2$$</p>
<p>To eliminate the radius component from this equation, let us assume that the circle we are integrating has a radius of one.  From this it is obvious that the area of a circle with a radius of one is equal to pi.</p>
<p>$$area = \pi$$</p>
<p>To find the area of a circle requires that we integrate its surface; however, because computers perform discrete, rather than continuous calculations, what would be an integration operation becomes a very large summation.  In the case of this example, we are going to start with a shape of known area.  -a square.  Because we’re interested in the area of a circle we will inscribe the circle of interest inside the square which consequentially has a side length of twice the circle’s radius.</p>
<img src="http://codyalantaylor.com/images/circlesquare.svg"></img>
<p>Because we know the area of the square, we can find the area of the circle in terms of the square’s area.  To begin our infinite sum let us randomly assign a value between 0 and 1 to each, the x and y-component of a coordinate pair.</p>
<pre><span style="color: #cc6600;">for</span> ( i = 0; i &lt; points; i++ ){
   
   x = ( randNum1 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );
   y = ( randNum2 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );         
<span style="color: #cc6600;">  
   if</span> ( <span style="color: #cc6600;">sqrt</span> ( ( x * x ) + ( y * y ) ) &lt;= 1 ){
      
       inCount++;

   }

}</pre>
<p>If the resultant point happens to fall within the circle, count it.  The area of the circle will be the ratio of points that fall within the square to the total points generated.</p>
<pre><span style="color: #cc6600;">for</span> ( i = 0; i &lt; points; i++ ){
   
   x = ( randNum1 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );
   y = ( randNum2 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );         
<span style="color: #cc6600;">  
   if</span> ( <span style="color: #cc6600;">sqrt</span> ( ( x * x ) + ( y * y ) ) &lt;= 1 ){
      
       inCount++;

   }

}</pre>
<p>In order to simplify the code we can exploit the symmetry of the problem and only generate points that fall within the first quadrant of the square.  Four times this ratio is our calculated value of pi.</p>
<img src="http://codyalantaylor.com/wp-content/uploads/2014/10/Pi_30K.gif"></img>
<p><a href="http://commons.wikimedia.org/wiki/File:Pi_30K.gif">Image Credit: Wikimedia Commons CaitlinJo</a></p>
<p>The complete Arduino sketch is below.  I’ve used it as an example because it’s code shows the logic of this example most plainly.  I have performed this same example it C++, Javascript, and Python.  I will post those examples soon.</p>
<pre>#include &lt;<span style="color: #cc6600;">SoftwareSerial</span>.h&gt;

<span style="color: #cc6600;">SoftwareSerial</span> comm(2,3);
<span style="color: #cc6600;">double</span> points = 100000;
<span style="color: #cc6600;">double</span> randMax = 1000;

<span style="color: #cc6600;">double</span> piCalc (<span style="color: #cc6600;">double</span> points )
	{
		<span style="color: #cc6600;">double</span> x = 0;
		<span style="color: #cc6600;">double</span> y = 0;
                <span style="color: #cc6600;">double</span> i;
		<span style="color: #cc6600;">double</span> inCount = 0;
		<span style="color: #cc6600;">double</span> pi;
                <span style="color: #cc6600;">double</span> randNum1;
                <span style="color: #cc6600;">double</span> randNum2;
                

		<span style="color: #cc6600;">for</span> ( i = 0; i &lt; points; i++ )
		{
			x = ( randNum1 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );
			y = ( randNum2 = ( <span style="color: #cc6600;">double</span> ) <span style="color: #cc6600;">random</span> (randMax) / randMax );
          
			<span style="color: #cc6600;">if</span> ( <span style="color: #cc6600;">sqrt</span> ( ( x * x ) + ( y * y ) ) &lt;= 1 )
			{
				inCount++;
			}
		}

		pi = ( inCount / points ) * 4.0;

		<span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">print</span>(<span style="color: #006699;">"inCount: "</span>);
                <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">println</span>(inCount);
                <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">print</span>(<span style="color: #006699;">"total: "</span>);
                <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">println</span>(i);
                <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">println</span>(pi);
                <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">println</span>(<span style="color: #006699;">" "</span>);

	}


<span style="color: #cc6600;">void</span> <span style="color: #cc6600;"><b>setup</b></span>() {    
  <span style="color: #cc6600;"><b>Serial</b></span>.<span style="color: #cc6600;">begin</span>(9600);  
  <span style="color: #cc6600;">randomSeed</span>(<span style="color: #cc6600;">analogRead</span>(0));
  piCalc( points );
}


<span style="color: #cc6600;">void</span> <span style="color: #cc6600;"><b>loop</b></span>() {
  
}

</pre>
<p>As I mentioned at the beginning of this explanation, this is not a terribly efficient method for calculating pi.  One should not expect this to be terribly quick or accurate.  It is; however, very comprehensible and is a neat exercise.   My first attempt at coding this was in C++.  At the time I was an intern for the Air Force working at Tinker Air Force base.  I was tasked with learning how to write code that could be distributed across what most would call a supercomputer.  My most extravagant attempt at this calculation was executed on 240 compute nodes and did not yield results any more accurate than what can be done with an Arduino.  This calculation method is entirely dependent upon the algorithm used for randomly generating the point coordinates.  Because what I’m calling ‘random numbers’ here are truly pseudo-random numbers. The numbers generated are predictable and will eventually repeat.  The limiting factor here is how evenly distributed the generated random numbers are.  In the ideal case, each generated point will be just as likely to fall within the arc of the circle as outside. If this distribution is slightly off, so will be the estimated value of pi.</p>
<img src="http://codyalantaylor.com/wp-content/uploads/2014/10/2014-01-02-15.20.jpg"></img>
<p>Results from 240 node high performance computer</p><!--End Content-->
</div>
<!--End twelve columns-->
</div>
<footer>
<div class="row">
<div class="twelve columns footer">
<a href="#">
<div class="license" id="cc"></div>
<div class="license" id="by"></div>
<div class="license" id="nc"></div>
<div class="license" id="nd"></div>
<div class="license" id="sa"></div>
<div class="license" id="nc-eu"></div>
<div class="license" id="nc-jp"></div>
<div class="license" id="pd"></div>
<div class="license" id="remix"></div>
<div class="license" id="sampling-plus"></div>
<div class="license" id="sampling"></div>
<div class="license" id="share"></div>
<div class="license" id="zero"></div>
</a>
<a href="#" class="rss"></a>
</div>
</div>
</footer>
<!--End container-->
</div>
</body>
</html>
